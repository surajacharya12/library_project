{% extends 'accounts/base.html' %} 
{% block content %} 
<h2>Available Books</h2> 
<!-- Search and Filter --> 
<div style="background: #f8f9fa; padding: 20px; border-radius: 4px; margin: 20px 0;">  
 <form method="get" style="display: flex; gap: 10px; align-items: end;">  
 <div style="flex: 1;"> 
 <label style="display: block; margin-bottom: 5px;">Search:</label>  
 <input type="text" name="search"  
 value="{{ search_query|default:'' }}" 
 placeholder="Search by title or author..." 
 style="width: 100%; padding: 8px; border: 1px solid #ddd;   border-radius: 4px;"> 
 </div> 
 <div style="width: 200px;"> 
 <label style="display: block; margin-bottom: 5px;">Category:</label>  
 <select name="category"  
 style="width: 100%; padding: 8px; border: 1px solid #ddd;   border-radius: 4px;"> 
 <option value="">All Categories</option> 
 {% for cat, display in categories %} 
 <option value="{{ cat }}"  
 {% if cat == selected_category %}selected{% endif %}>  {{ display }} 
 </option> 
 {% endfor %} 
 </select> 
 </div> 
 <button type="submit"  
 style="padding: 8px 20px; background: #3498db; color: white;   border: none; border-radius: 4px; cursor: pointer;">  
 Filter 
 </button> 
 <a href="{% url 'available_books' %}"  
 style="padding: 8px 20px; background: #95a5a6; color: white;   text-decoration: none; border-radius: 4px;"> 
 Clear 
 </a> 
 </form> 
</div> 
{% if books %} 
<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));   gap: 20px; margin-top: 20px;"> 
 {% for book in books %} 
 <div style="border: 1px solid #ddd; padding: 20px; border-radius: 8px;   background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">  
 <h3 style="margin: 0 0 10px 0; color: #2c3e50;">{{ book.title }}</h3>  
 <p style="margin: 5px 0; color: #7f8c8d;"> 
 <strong>Author:</strong> {{ book.author }} 
 </p> 
 <p style="margin: 5px 0; color: #7f8c8d;"> 
 <strong>Category:</strong> {{ book.get_category_display }}  
 </p> 
 <p style="margin: 5px 0;"> 
 <strong>Available:</strong>  
 <span style="color: #27ae60; font-weight: bold;"> 
 {{ book.available_copies }} / {{ book.total_copies }} 
 </span> 
 </p> 
 {% if book.description %} 
 <p style="margin: 10px 0 0 0; font-size: 14px; color: #555;"> 
 {{ book.description|truncatewords:20 }} 
 </p> 
 {% endif %} 
 <a href="{% url 'book_detail' book.pk %}"  
 style="display: inline-block; margin-top: 10px; color: #3498db;   text-decoration: none;"> 
 View Details → 
 </a> 
 </div> 
 {% endfor %} 
</div> 
{% else %} 
<p style="text-align: center; color: #7f8c8d; margin: 40px 0;">  No available books found matching your criteria. 
</p> 
{% endif %} 
<div style="margin-top: 30px;"> 
 <a href="{% url 'member_dashboard' %}" style="color: #3498db;">  ← Back to Dashboard 
 </a> 
</div> 
{% endblock %}
